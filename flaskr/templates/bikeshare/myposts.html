{% extends 'base.html' %}

{% block header %}
  <h1 class="display-2">{% block title %}Posts{% endblock %}</h1>
  {% if g.user %}
    <a class="action btn btn-outline-info btn-lg mt-2 mb-4" href="{{ url_for('bikeshare.create') }}">New</a>
  {% endif %}
{% endblock %}

{% block content %}
  {% for post in posts %}
    <div class="post card">
        <div class="card-header">
            by {{ post['username'] }} on {{ post['created'].strftime('%Y-%m-%d') }}
        </div>
        
        <div class="card-body">
            <!-- <img src="..." class="card-img-top" alt="..."> -->
            <div class="card-title">
            <h1><a class="action" style="text-decoration:none" href="{{url_for('bikeshare.view', id=post['id']) }}"> {{ post['title'] }}</a></h1>
            </div>
        </div>

        <div class="card-body">
            <p class="card-text">{{ post['body'] }}</p>
        </div>

        <div class="card-body">
            {% if g.user['id'] == post['author_id'] %}
            <a class="action btn btn-outline-secondary mt-1" href="{{ url_for('bikeshare.update', id=post['id']) }}" style="--bs-btn-padding-y: .125rem; --bs-btn-padding-x: 1rem; --bs-btn-font-size: .75rem;">Edit</a>
            {% endif %}
        </div>
    </div>
    {% if not loop.last %}
      <hr>
    {% endif %}
  {% endfor %}
{% endblock %}